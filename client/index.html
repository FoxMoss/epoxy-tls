<html>

<head>
    <title>epoxy</title>
    <style>
    body { font-family: sans-serif }
    #logs > * { font-family: monospace }
    </style>
    <script>
        const params = (new URL(window.location.href)).searchParams;
        const feature_test = params.has("feature_test");
        const multiparallel_test = params.has("multi_parallel_test");
        const parallel_test = params.has("parallel_test");
        const multiperf_test = params.has("multi_perf_test");
        const perf_test = params.has("perf_test");
        const ws_test = params.has("ws_test");
        const tls_test = params.has("rawtls_test");
        const dns_test = params.has("dns_test");
        const worker = new Worker("demo.js");
        worker.onmessage = (msg) => {
            let el = document.createElement("div");
            el.textContent = msg.data;
            document.getElementById("logs").appendChild(el);
            window.scrollTo(0, document.body.scrollHeight);
        };
        worker.postMessage([feature_test, multiparallel_test, parallel_test, multiperf_test, perf_test, ws_test, tls_test, dns_test]);
    </script>
</head>

<body>
    <div>
        running... (wait for the browser alert if not running ws test)
    </div>
    <div id="logs"></div>
</body>

</html>
